<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <meta name="description" content="ä¸“æ³¨äºç¼–ç¨‹æŠ€æœ¯å’Œæ•°æ®ç§‘å­¦ã€äººå·¥æ™ºèƒ½">
  <meta name="keyword" content="äººå·¥æ™ºèƒ½, æ•°æ®ç§‘å­¦, Python, ç¼–ç¨‹, ç¨‹åºå‘˜, å¼€å‘è€…, web, ç½‘ç«™, è¯­è¨€, ç¨‹åº, UI, ç¾å·¥, è®¾è®¡å¸ˆ">
  
    <link rel="shortcut icon" href="/css/images/logo.png">
  
  <title>
    
      å‰–æWebæŠ€æœ¯æ ˆï¼ˆäºŒï¼‰ | è€é½æ•™å®¤
    
  </title>
  <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.css" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/tomorrow.min.css" rel="stylesheet">
  
<link rel="stylesheet" href="/css/style.css">

  
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/geopattern/1.2.3/js/geopattern.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.js"></script>
  
  
  
  
    <!-- MathJax support START -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <!-- MathJax support END -->
  


<meta name="generator" content="Hexo 4.2.0"></head>
<div class="wechat-share">
  <img src="/css/images/logo.png" />
</div>

  <body>
    <header class="header fixed-header">
  <div class="header-container">
    <a class="home-link" href="/">
      <div class="logo"></div>
      <span>è€é½æ•™å®¤</span>
    </a>
    <ul class="right-list">
      
        <li class="list-item">
          
            <a href="/" class="item-link">Home</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/tags/" class="item-link">Books</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/archives/" class="item-link">Archives</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/project/" class="item-link">Projects</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/about/" class="item-link">About</a>
          
        </li>
      
    </ul>
    <div class="menu">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </div>
    <div class="menu-mask">
      <ul class="menu-list">
        
          <li class="menu-item">
            
              <a href="/" class="menu-link">Home</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/tags/" class="menu-link">Books</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/archives/" class="menu-link">Archives</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/project/" class="menu-link">Projects</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/about/" class="menu-link">About</a>
            
          </li>
        
      </ul>
    </div>
  </div>
</header>

    <div id="article-banner">
  
  <!-- <div class="arrow-down">
    <a href="javascript:;"></a>
  </div> -->
</div>
<main class="app-body flex-box">
  <!-- Article START -->
  <article class="post-article">
    <h2>å‰–æWebæŠ€æœ¯æ ˆï¼ˆäºŒï¼‰</h2>
    <p class="post-date">2020-04-28</p>
    <section class="markdown-content"><p>ä½œè€…ï¼šLeonardo Giordani</p>
<p>ç¿»è¯‘ï¼šè€é½</p>
<p>ä¸æœ¬æ–‡ç›¸å…³ä¹¦ç±æ¨èï¼šã€Šè·Ÿè€é½å­¦Pythonï¼šDjangoå®æˆ˜ã€‹</p>
<p><img src="https://public-tuchuang.oss-cn-hangzhou.aliyuncs.com/Django2%E7%AB%8B%E4%BD%93%E5%9B%BE_20200117164816.png" alt=""></p>
<blockquote>
<p>åœ¨æœ¬ç³»åˆ—çš„ç¬¬ä¸€ç¯‡ä¸­ï¼Œå·²ç»å¯¹webæŠ€æœ¯æ ˆçš„åŸºæœ¬åšäº†ä»‹ç»ï¼Œæœ¬èŠ‚å°†é‡ç‚¹ä»‹ç»scoketåŠå…¶å®ç°ã€‚</p>
</blockquote>
<h2 id="1-å¥—æ¥å­—"><a href="#1-å¥—æ¥å­—" class="headerlink" title="1 å¥—æ¥å­—"></a>1 å¥—æ¥å­—</h2><h3 id="1-1-åŸºæœ¬åŸç†"><a href="#1-1-åŸºæœ¬åŸç†" class="headerlink" title="1.1 åŸºæœ¬åŸç†"></a>1.1 åŸºæœ¬åŸç†</h3><p>TCP/IPæ˜¯ä¸€ç§ä½¿ç”¨å¥—æ¥å­—ï¼ˆsocketï¼‰çš„ç½‘ç»œåè®®ã€‚Socketæ˜¯åŒ…æ‹¬IPåœ°å€(åœ¨ç½‘ç»œä¸­æ˜¯å”¯ä¸€çš„)å’Œç«¯å£(å¯¹äºç‰¹å®šçš„IPåœ°å€æ˜¯å”¯ä¸€çš„)çš„å…ƒç»„ï¼Œè®¡ç®—æœºä½¿ç”¨IPåœ°å€å’Œç«¯å£ä¸å…¶ä»–è®¡ç®—æœºé€šä¿¡ã€‚Socketç±»ä¼¼æ–‡ä»¶ï¼Œå¯ä»¥æ‰“å¼€å’Œå…³é—­ï¼Œä¹Ÿå¯ä»¥è¯»å†™ã€‚Socketç¼–ç¨‹æ˜¯ä¸€ç§ä½çº§çš„ç½‘ç»œç¼–ç¨‹ï¼Œä½†ä½ éœ€è¦çŸ¥é“ï¼Œè®¡ç®—æœºä¸­æä¾›ç½‘ç»œè®¿é—®çš„æ¯ä¸ªè½¯ä»¶æœ€ç»ˆéƒ½å¿…é¡»å¤„ç†Socketï¼ˆä¸è¿‡ï¼Œå¾ˆå¯èƒ½æ˜¯é€šè¿‡æŸäº›åº“æ¥å¤„ç†ï¼‰ã€‚</p>
<p>å› ä¸ºæˆ‘ä»¬æ˜¯ä»å¤´å¼€å§‹æ„å»ºï¼Œæ‰€ä»¥è¦å…ˆå®ç°ä¸€ä¸ªå°çš„Pythonç¨‹åºï¼Œå®ƒæ‰“å¼€ä¸€ä¸ªsocketè¿æ¥ï¼Œæ¥æ”¶HTTPè¯·æ±‚ï¼Œå¹¶è¿”å›å¯¹è¿™ä¸ªHTTPè¯·æ±‚çš„å“åº”ã€‚ç”±äºç«¯å£<code>80</code>æ˜¯ä¸€ä¸ªâ€œä½çº§ç«¯å£â€ï¼ˆä¸€ä¸ªå°äº1024çš„æ•°å­—ï¼‰ï¼Œé€šå¸¸æ²¡æœ‰æƒé™æ‰“å¼€é‚£é‡Œçš„socketï¼Œæ‰€ä»¥æˆ‘å°†ä½¿ç”¨ç«¯å£8080ã€‚è¿™æš‚æ—¶ä¸æ˜¯é—®é¢˜ï¼Œå› ä¸ºä»»ä½•ç«¯å£ä¸Šéƒ½å¯ä»¥æä¾›HTTPæœåŠ¡ã€‚</p>
<h3 id="1-2-å®ç°"><a href="#1-2-å®ç°" class="headerlink" title="1.2 å®ç°"></a>1.2 å®ç°</h3><p>åˆ›å»ºæ–‡ä»¶<code>server.py</code>å¹¶é”®å…¥ä¸‹é¢çš„ä»£ç ã€‚æ˜¯çš„ï¼Œè¾“å…¥å®ƒï¼Œä¸è¦åªæ˜¯å¤åˆ¶å’Œç²˜è´´ï¼Œå¦åˆ™ä½ ä¸ä¼šå­¦åˆ°ä»»ä½•ä¸œè¥¿ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">import socket</span><br><span class="line"></span><br><span class="line"># Create a socket instance</span><br><span class="line"># AF_INET: use IP protocol version 4</span><br><span class="line"># SOCK_STREAM: full-duplex byte stream</span><br><span class="line">s &#x3D; socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line"></span><br><span class="line"># Allow reuse of addresses</span><br><span class="line">s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)</span><br><span class="line"></span><br><span class="line"># Bind the socket to any address, port 8080, and listen</span><br><span class="line">s.bind((&#39;&#39;, 8080))</span><br><span class="line">s.listen()</span><br><span class="line"></span><br><span class="line"># Serve forever</span><br><span class="line">while True:</span><br><span class="line">    # Accept the connection</span><br><span class="line">    conn, addr &#x3D; s.accept()</span><br><span class="line"></span><br><span class="line">    # Receive data from this socket using a buffer of 1024 bytes</span><br><span class="line">    data &#x3D; conn.recv(1024)</span><br><span class="line"></span><br><span class="line">    # Print out the data</span><br><span class="line">    print(data.decode(&#39;utf-8&#39;))</span><br><span class="line"></span><br><span class="line">    # Close the connection</span><br><span class="line">    conn.close()</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªå°ç¨‹åºæ¥å—8080ç«¯å£ä¸Šçš„è¿æ¥ï¼Œå¹¶åœ¨ç»ˆç«¯ä¸Šæ‰“å°æ¥æ”¶åˆ°çš„æ•°æ®ã€‚ä½ å¯ä»¥æ‰§è¡Œè¿™ä¸ªç¨‹åºï¼Œç„¶ååœ¨å¦ä¸€ä¸ªç»ˆç«¯ä¸­è¿è¡Œ<code>curl localhost:8080</code>ï¼Œåº”è¯¥çœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„å†…å®¹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ python3 server.py </span><br><span class="line">GET &#x2F; HTTP&#x2F;1.1</span><br><span class="line">Host: localhost:8080</span><br><span class="line">User-Agent: curl&#x2F;7.65.3</span><br><span class="line">Accept: *&#x2F;*</span><br></pre></td></tr></table></figure>

<p>æœåŠ¡å™¨ä¸€ç›´åœ¨<code>while</code>å¾ªç¯ä¸­è¿è¡Œä»£ç ï¼Œå¦‚æœè¦ç»ˆæ­¢è¿è¡Œï¼Œå¿…é¡»ä½¿ç”¨<code>Ctrl+C</code>æ¥å®Œæˆã€‚åˆ°ç›®å‰ä¸ºæ­¢è¿˜ä¸é”™ï¼Œä½†è¿™è¿˜ä¸æ˜¯ä¸€ä¸ªHTTPæœåŠ¡å™¨ï¼Œå› ä¸ºå®ƒæ²¡æœ‰å‘é€ä»»ä½•å“åº”ï¼›å®é™…ä¸Šï¼Œä½ åº”è¯¥ä¼šä»curlæ¥æ”¶åˆ°ä¸€æ¡é”™è¯¯æ¶ˆæ¯ï¼Œä¸Šé¢å†™ç€â€œcurl: (52) Empty reply from serverâ€ã€‚</p>
<p>è¿”å›æ ‡å‡†å“åº”éå¸¸ç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦è°ƒç”¨<code>conn.sendall</code>ï¼Œä¼ é€’åŸå§‹å­—èŠ‚ã€‚æœ€å°çš„HTTPå“åº”åŒ…å«åè®®å’ŒçŠ¶æ€ã€ç©ºè¡Œå’Œå®é™…å†…å®¹ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">HTTP&#x2F;1.1 200 OK</span><br><span class="line"></span><br><span class="line">Hi there!</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬çš„æœåŠ¡å™¨å˜æˆ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">import socket</span><br><span class="line"></span><br><span class="line"># Create a socket instance</span><br><span class="line"># AF_INET: use IP protocol version 4</span><br><span class="line"># SOCK_STREAM: full-duplex byte stream</span><br><span class="line">s &#x3D; socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line"></span><br><span class="line"># Allow reuse of addresses</span><br><span class="line">s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)</span><br><span class="line"></span><br><span class="line"># Bind the socket to any address, port 8080, and listen</span><br><span class="line">s.bind((&#39;&#39;, 8080))</span><br><span class="line">s.listen()</span><br><span class="line"></span><br><span class="line"># Serve forever</span><br><span class="line">while True:</span><br><span class="line">    # Accept the connection</span><br><span class="line">    conn, addr &#x3D; s.accept()</span><br><span class="line"></span><br><span class="line">    # Receive data from this socket using a buffer of 1024 bytes</span><br><span class="line">    data &#x3D; conn.recv(1024)</span><br><span class="line"></span><br><span class="line">    # Print out the data</span><br><span class="line">    print(data.decode(&#39;utf-8&#39;))</span><br><span class="line"></span><br><span class="line">    conn.sendall(bytes(&quot;HTTP&#x2F;1.1 200 OK\n\nHi there!\n&quot;, &#39;utf-8&#39;))</span><br><span class="line"></span><br><span class="line">    # Close the connection</span><br><span class="line">    conn.close()</span><br></pre></td></tr></table></figure>

<p>ä½†æ­¤æ—¶ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰çœŸæ­£å“åº”ç”¨æˆ·çš„è¯·æ±‚ã€‚å¦‚æœå°è¯•ä½¿ç”¨ä¸åŒçš„curlå‘½ä»¤è¡Œï¼Œå¦‚<code>curl localhost:8080/index.html</code>æˆ–<code>curl localhost:8080/main.css</code>ï¼Œä½ æ€»æ˜¯æ”¶åˆ°ç›¸åŒçš„å“åº”ã€‚æˆ‘ä»¬åº”è¯¥å°è¯•æ‰¾åˆ°ç”¨æˆ·è¯·æ±‚çš„èµ„æºå¹¶å°†å…¶éšåŒå“åº”çš„å†…å®¹è¿”å›ã€‚</p>
<p><img src="https://public-tuchuang.oss-cn-hangzhou.aliyuncs.com/%E8%BD%BB%E6%9D%BE%E5%85%A5%E9%97%A8_20200122130623.png" alt=""></p>
<p>æ­¤ç‰ˆæœ¬çš„HTTPæœåŠ¡å™¨æ­£ç¡®åœ°æå–èµ„æºå¹¶å°è¯•ä»å½“å‰ç›®å½•åŠ è½½å®ƒï¼Œè¿”å›ç»“æœæˆ–æˆåŠŸæˆ–å¤±è´¥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">import socket</span><br><span class="line">import re</span><br><span class="line"></span><br><span class="line"># Create a socket instance</span><br><span class="line"># AF_INET: use IP protocol version 4</span><br><span class="line"># SOCK_STREAM: full-duplex byte stream</span><br><span class="line">s &#x3D; socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line"></span><br><span class="line"># Allow reuse of addresses</span><br><span class="line">s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)</span><br><span class="line"></span><br><span class="line"># Bind the socket to any address, port 8080, and listen</span><br><span class="line">s.bind((&#39;&#39;, 8080))</span><br><span class="line">s.listen()</span><br><span class="line"></span><br><span class="line">HEAD_200 &#x3D; &quot;HTTP&#x2F;1.1 200 OK\n\n&quot;</span><br><span class="line">HEAD_404 &#x3D; &quot;HTTP&#x2F;1.1 404 Not Found\n\n&quot;</span><br><span class="line"></span><br><span class="line"># Serve forever</span><br><span class="line">while True:</span><br><span class="line">    # Accept the connection</span><br><span class="line">    conn, addr &#x3D; s.accept()</span><br><span class="line"></span><br><span class="line">    # Receive data from this socket using a buffer of 1024 bytes</span><br><span class="line">    data &#x3D; conn.recv(1024)</span><br><span class="line"></span><br><span class="line">    request &#x3D; data.decode(&#39;utf-8&#39;)</span><br><span class="line"></span><br><span class="line">    # Print out the data</span><br><span class="line">    print(request)</span><br><span class="line"></span><br><span class="line">    resource &#x3D; re.match(r&#39;GET &#x2F;(.*) HTTP&#39;, request).group(1)</span><br><span class="line">    try:</span><br><span class="line">        with open(resource, &#39;r&#39;) as f:</span><br><span class="line">            content &#x3D; HEAD_200 + f.read()</span><br><span class="line">        print(&#39;Resource &#123;&#125; correctly served&#39;.format(resource))</span><br><span class="line">    except FileNotFoundError:</span><br><span class="line">        content &#x3D; HEAD_404 + &quot;Resource &#x2F;&#123;&#125; cannot be found\n&quot;.format(resource)</span><br><span class="line">        print(&#39;Resource &#123;&#125; cannot be loaded&#39;.format(resource))</span><br><span class="line"></span><br><span class="line">    print(&#39;--------------------&#39;)</span><br><span class="line"></span><br><span class="line">    conn.sendall(bytes(content, &#39;utf-8&#39;))</span><br><span class="line"></span><br><span class="line">    # Close the connection</span><br><span class="line">    conn.close()</span><br></pre></td></tr></table></figure>

<p>æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œè¿™ä¸ªå®ç°éå¸¸ç®€å•ã€‚å¦‚æœä½ ä½¿ç”¨ä¸‹é¢çš„å†…å®¹åˆ›å»ºä¸€ä¸ªç®€å•çš„æœ¬åœ°æ–‡ä»¶ï¼Œæ–‡ä»¶åä¸º<code>index.html</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;This is my page&lt;&#x2F;title&gt;</span><br><span class="line">    &lt;link rel&#x3D;&quot;stylesheet&quot; href&#x3D;&quot;main.css&quot;&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;p&gt;Some random content&lt;&#x2F;p&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œ<code>curl localhost:8080/index.html</code>ï¼Œä½ å°†çœ‹åˆ°æ–‡ä»¶çš„å†…å®¹ã€‚æ­¤æ—¶ï¼Œä½ ç”šè‡³å¯ä»¥ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€<code>http://localhost:8080/index.html</code>ï¼Œä½ è¿˜å¯ä»¥çœ‹åˆ°é¡µé¢çš„æ ‡é¢˜å’Œå†…å®¹ã€‚Webæµè§ˆå™¨æ˜¯ä¸€ç§èƒ½å¤Ÿå‘é€HTTPè¯·æ±‚å¹¶è§£é‡Šå“åº”å†…å®¹çš„è½¯ä»¶ï¼Œåªè¦è¿™äº›å†…å®¹æ˜¯HTMLæ–‡ä»¶ï¼ˆä»¥åŠè®¸å¤šå…¶ä»–æ–‡ä»¶ç±»å‹ï¼Œå¦‚å›¾åƒæˆ–è§†é¢‘ï¼‰ã€‚å› æ­¤ï¼Œæµè§ˆå™¨å¯ä»¥å‘ˆç°è¿”å›ä¿¡æ¯çš„å†…å®¹ã€‚æµè§ˆå™¨è¿˜è´Ÿè´£å¯¹æ¸²æŸ“æ‰€éœ€çš„ç¼ºå¤±èµ„æºè¿›è¡Œæ£€ç´¢ã€‚å› æ­¤ï¼Œå½“ä½ åœ¨é¡µé¢çš„HTMLä»£ç ä¸­æä¾›æŒ‡å‘å¸¦æœ‰<code>&lt;link&gt;</code>æˆ–<code>&lt;script&gt;</code>æ ‡è®°çš„æ ·å¼è¡¨æˆ–JSè„šæœ¬çš„é“¾æ¥æ—¶ï¼Œä½ ä¹Ÿæ˜¯åœ¨æŒ‡ç¤ºæµè§ˆå™¨ä¸ºè¿™äº›æ–‡ä»¶å‘é€HTTP GETè¯·æ±‚ã€‚</p>
<p>è®¿é—®<code>http://localhost:8080/index.html</code>æ—¶ï¼Œ<code>server.py</code>çš„è¾“å‡ºæ˜¯</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">GET &#x2F;index.html HTTP&#x2F;1.1</span><br><span class="line">Host: localhost:8080</span><br><span class="line">User-Agent: Mozilla&#x2F;5.0 (X11; Ubuntu; Linux x86_64; rv:72.0) Gecko&#x2F;20100101 Firefox&#x2F;72.0</span><br><span class="line">Accept: text&#x2F;html,application&#x2F;xhtml+xml,application&#x2F;xml;q&#x3D;0.9,image&#x2F;webp,*&#x2F;*;q&#x3D;0.8</span><br><span class="line">Accept-Language: en-GB,en;q&#x3D;0.5</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Connection: keep-alive</span><br><span class="line">Upgrade-Insecure-Requests: 1</span><br><span class="line">Pragma: no-cache</span><br><span class="line">Cache-Control: no-cache</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Resource index.html correctly served</span><br><span class="line">--------------------</span><br><span class="line">GET &#x2F;main.css HTTP&#x2F;1.1</span><br><span class="line">Host: localhost:8080</span><br><span class="line">User-Agent: Mozilla&#x2F;5.0 (X11; Ubuntu; Linux x86_64; rv:72.0) Gecko&#x2F;20100101 Firefox&#x2F;72.0</span><br><span class="line">Accept: text&#x2F;css,*&#x2F;*;q&#x3D;0.1</span><br><span class="line">Accept-Language: en-GB,en;q&#x3D;0.5</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Connection: keep-alive</span><br><span class="line">Referer: http:&#x2F;&#x2F;localhost:8080&#x2F;index.html</span><br><span class="line">Pragma: no-cache</span><br><span class="line">Cache-Control: no-cache</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Resource main.css cannot be loaded</span><br><span class="line">--------------------</span><br><span class="line">GET &#x2F;favicon.ico HTTP&#x2F;1.1</span><br><span class="line">Host: localhost:8080</span><br><span class="line">User-Agent: Mozilla&#x2F;5.0 (X11; Ubuntu; Linux x86_64; rv:72.0) Gecko&#x2F;20100101 Firefox&#x2F;72.0</span><br><span class="line">Accept: image&#x2F;webp,*&#x2F;*</span><br><span class="line">Accept-Language: en-GB,en;q&#x3D;0.5</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Connection: keep-alive</span><br><span class="line">Pragma: no-cache</span><br><span class="line">Cache-Control: no-cache</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Resource favicon.ico cannot be loaded</span><br><span class="line">--------------------</span><br></pre></td></tr></table></figure>

<p>å¦‚ä½ æ‰€è§ï¼Œæµè§ˆå™¨å‘é€å¤§é‡çš„HTTPè¯·æ±‚ï¼Œå…¶ä¸­åŒ…å«å¤§é‡çš„headerä¿¡æ¯ï¼Œè‡ªåŠ¨è¯·æ±‚HTMLä»£ç ä¸­æåˆ°çš„CSSæ–‡ä»¶ï¼Œå¹¶è‡ªåŠ¨å°è¯•æ£€ç´¢ç½‘ç«™å›¾æ ‡ã€‚</p>
<h3 id="1-3-å‚è€ƒèµ„æº"><a href="#1-3-å‚è€ƒèµ„æº" class="headerlink" title="1.3 å‚è€ƒèµ„æº"></a>1.3 å‚è€ƒèµ„æº</h3><p>è¿™äº›èµ„æºå¯¹æœ¬èŠ‚æ‰€è®¨è®ºçš„ä¸»é¢˜æä¾›äº†æ›´è¯¦ç»†çš„ä¿¡æ¯</p>
<ul>
<li><a href="https://docs.python.org/3/howto/sockets.html" target="_blank" rel="noopener" title="Python 3 Socket Programming HOWTO">Python 3 Socket Programming HOWTO</a></li>
<li><a href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec5.html#sec5" target="_blank" rel="noopener" title="HTTP/1.1 Request format">HTTP/1.1 Request format</a></li>
<li><a href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec6.html#sec6" target="_blank" rel="noopener" title="HTTP/1.1 Response format">HTTP/1.1 Response format</a></li>
</ul>
<p>æœ¬æ–‡ä¾‹å­çš„æºä»£ç å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°ï¼š<a href="https://github.com/lgiordani/dissecting-a-web-stack-code/tree/master/1_sockets_and_parsers" target="_blank" rel="noopener">https://github.com/lgiordani/dissecting-a-web-stack-code/tree/master/1_sockets_and_parsers</a>)</p>
<h3 id="1-4-é—®é¢˜"><a href="#1-4-é—®é¢˜" class="headerlink" title="1.4 é—®é¢˜"></a>1.4 é—®é¢˜</h3><p>ä¸Šé¢çš„ç¨‹åºè®©ä½ æœ‰ç‚¹äº†ç‚¹æˆå°±æ„Ÿï¼Œä½ ä»å¤´å¼€å§‹æ„å»ºäº†ä¸€ä¸ªé¡¹ç›®ï¼Œç„¶åå‘ç°å®ƒå¯ä»¥ä¸ä½ æ¯å¤©ä½¿ç”¨çš„æµè§ˆå™¨ç­‰æˆç†Ÿçš„è½¯ä»¶é¡ºåˆ©åœ°ååŒå·¥ä½œã€‚æˆ‘è¿˜è®¤ä¸ºï¼Œæœ‰è¶£çš„æ˜¯ï¼ŒåƒHTTPè¿™æ ·çš„æŠ€æœ¯ï¼Œç°åœ¨åŸºæœ¬ä¸Šéå¸ƒå…¨ä¸–ç•Œäº†ï¼Œä½†å®ƒä»¬çš„æ ¸å¿ƒéå¸¸ç®€å•ã€‚</p>
<p>åœ¨ä¸Šé¢çš„æ“ä½œä¸­ï¼ŒHTTPçš„è®¸å¤šç‰¹æ€§éƒ½æ²¡æœ‰åœ¨ç®€å•socket ç¼–ç¨‹ä¸­æ¶‰åŠåˆ°ã€‚é¦–å…ˆï¼ŒHTTP/1.0åœ¨GETä¹‹åå¼•å…¥äº†å…¶ä»–æ–¹æ³•ï¼Œæ¯”å¦‚POSTï¼Œå®ƒå¯¹äºä»Šå¤©çš„ç½‘ç«™æ¥è¯´æ˜¯è‡³å…³é‡è¦çš„ã€‚è¿™äº›ç½‘ç«™çš„ç”¨æˆ·é€šè¿‡è¡¨å•ä¸æ–­åœ°å‘æœåŠ¡å™¨å‘é€ä¿¡æ¯ã€‚è¦å®ç°æ‰€æœ‰è¿™9ä¸ªHTTPæ–¹æ³•ï¼Œæˆ‘ä»¬éœ€è¦æ­£ç¡®åœ°è§£æä¼ å…¥çš„è¯·æ±‚å¹¶å‘ä»£ç ä¸­æ·»åŠ ç›¸å…³å‡½æ•°ã€‚</p>
<p>ä¸è¿‡ï¼Œåœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œä½ å¯èƒ½ä¼šæ³¨æ„åˆ°ï¼Œæˆ‘ä»¬æ­£åœ¨å¤„ç†åè®®çš„è®¸å¤šä½çº§ç»†èŠ‚ï¼Œè€Œè¿™äº›é€šå¸¸ä¸æ˜¯æˆ‘ä»¬ä¸šåŠ¡çš„æ ¸å¿ƒã€‚é€šè¿‡HTTPæ„å»ºä¸€ä¸ªæœåŠ¡æ—¶ï¼Œæˆ‘ä»¬æœ‰è¶³å¤Ÿçš„çŸ¥è¯†æ¥æ­£ç¡®å®ç°ä¸€äº›ä»£ç ã€‚è¿™äº›ä»£ç å¯ä»¥ç®€åŒ–ç‰¹å®šçš„è¿‡ç¨‹ï¼Œæ¯”å¦‚æœç´¢å…¶ä»–ç½‘ç«™ã€è´­ä¹°ä¹¦ç±æˆ–ä¸æœ‹å‹å…±äº«å›¾ç‰‡ã€‚æˆ‘ä»¬ä¸æƒ³èŠ±æ—¶é—´å»ç†è§£TCP/IPå¥—æ¥å­—ï¼ˆsocketï¼‰çš„å¾®å¦™ä¹‹å¤„ï¼Œä¹Ÿä¸æƒ³ä¸ºè¯·æ±‚â€”â€”å“åº”åè®®ç¼–å†™è§£æå™¨ã€‚å¾ˆé«˜å…´çœ‹åˆ°è¿™äº›æŠ€æœ¯çš„å·¥ä½œåŸç†ï¼Œä½†æ˜¯åœ¨æ—¥å¸¸å·¥ä½œä¸­ï¼Œæˆ‘ä»¬éœ€è¦å…³æ³¨æ›´é«˜å±‚æ¬¡çš„ä¸œè¥¿ã€‚</p>
<p>ç”±äºHTTPæ˜¯æ— çŠ¶æ€åè®®ï¼Œå°å‹HTTPæœåŠ¡å™¨çš„æƒ…å†µå¯èƒ½ä¼šæ¶åŒ–ã€‚è¯¥åè®®ä¸æä¾›ä»»ä½•è¿æ¥ä¸¤ä¸ªè¿ç»­è¯·æ±‚çš„æ–¹æ³•ï¼Œå› æ­¤å¯ä»¥è·Ÿè¸ªé€šä¿¡çŠ¶æ€ï¼Œè¿™æ˜¯ç°ä»£äº’è”ç½‘çš„åŸºçŸ³ã€‚æ¯å½“æˆ‘ä»¬åœ¨ä¸€ä¸ªç½‘ç«™ä¸Šè¿›è¡Œèº«ä»½éªŒè¯ï¼Œå¹¶ä¸”æˆ‘ä»¬æƒ³è®¿é—®å…¶ä»–é¡µé¢æ—¶ï¼Œéœ€è¦æœåŠ¡å™¨è®°ä½æˆ‘ä»¬æ˜¯è°ï¼Œè¿™æ„å‘³ç€è¦è·Ÿè¸ªè¿æ¥çš„çŠ¶æ€ã€‚</p>
<p>é•¿è¯çŸ­è¯´ï¼šè¦æˆä¸ºä¸€ä¸ªæ­£å¸¸è¿è¡Œçš„HTTPæœåŠ¡å™¨ï¼Œæˆ‘ä»¬çš„ä»£ç æ­¤æ—¶åº”è¯¥å®ç°æ‰€æœ‰HTTPæ–¹æ³•å’Œcookiesç®¡ç†ï¼Œè¿˜éœ€è¦æ”¯æŒå…¶ä»–åè®®ï¼Œå¦‚Websocketsã€‚è¿™äº›éƒ½æ˜¯äº›å¾®ä¸è¶³é“çš„ä»»åŠ¡ï¼Œæ‰€ä»¥æˆ‘ä»¬è‚¯å®šéœ€è¦åœ¨æ•´ä¸ªç³»ç»Ÿä¸­æ·»åŠ ä¸€äº›ç»„ä»¶ï¼Œè®©æˆ‘ä»¬ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸æ˜¯åº”ç”¨ç¨‹åºåè®®çš„ä½çº§ç»†èŠ‚ã€‚</p>
<p>ï¼ˆæœªå®Œï¼Œå¾…ç»­ï¼‰</p>
<blockquote>
<p>æœç´¢æŠ€æœ¯é—®ç­”çš„å…¬ä¼—å·ï¼šè€é½æ•™å®¤</p>
</blockquote>
<blockquote>
<p>åœ¨å…¬ä¼—å·ä¸­å›å¤ï¼š<strong>è€é½</strong>ï¼Œå¯æŸ¥çœ‹æ‰€æœ‰æ–‡ç« ã€ä¹¦ç±ã€è¯¾ç¨‹ã€‚</p>
</blockquote>
<p style="text-align:right"><strong style="max-width: 100%;color: rgb(255, 255, 255);background-color: rgb(234, 6, 13);box-sizing: border-box !important;overflow-wrap: break-word !important;">è§‰å¾—å¥½çœ‹ï¼Œå°±ç‚¹è¿™é‡ŒğŸ‘‡ğŸ‘‡ğŸ‘‡</strong></p></section>
    <!-- Tags START -->
    
    <!-- Tags END -->
    <!-- NAV START -->
    
  <div class="nav-container">
    <!-- reverse left and right to put prev and next in a more logic postition -->
    
      <a class="nav-left" href="/2020/04/26/cost-function-notebook/">
        <span class="nav-arrow">â† </span>
        
          cost function ç¬”è®°
        
      </a>
    
    
      <a class="nav-right" href="/2020/04/28/logistic-notebook/">
        
          ã€logisticå›å½’ã€‘ç¬”è®°
        
        <span class="nav-arrow"> â†’</span>
      </a>
    
  </div>

    <!-- NAV END -->
    <!-- æ‰“èµ START -->
    
      <div class="money-like">
        <div class="reward-btn">
          èµ
          <span class="money-code">
            <span class="alipay-code">
              <div class="code-image"></div>
              <b>ä½¿ç”¨æ”¯ä»˜å®æ‰“èµ</b>
            </span>
            <span class="wechat-code">
              <div class="code-image"></div>
              <b>ä½¿ç”¨å¾®ä¿¡æ‰“èµ</b>
            </span>
          </span>
        </div>
        <p class="notice">è‹¥ä½ è§‰å¾—æˆ‘çš„æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®å¯¹æˆ‘æ‰“èµ</p>
      </div>
    
    <!-- æ‰“èµ END -->
    <!-- äºŒç»´ç  START -->
    <!--% if (theme.qrcode) { %-->
      <div class="qrcode">
        <!--canvas id="share-qrcode"></!--canvas-->
        <img src="https://public-tuchuang.oss-cn-hangzhou.aliyuncs.com/WechatIMG6_20200109154827.jpeg" width=400>
        <p class="notice">å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼Œè¯»æ–‡ç« ã€å¬è¯¾ç¨‹ï¼Œæå‡æŠ€èƒ½</p>
      </div>
    <!--% } %-->
    <!-- äºŒç»´ç  END -->
    
      <!-- No Comment -->
    
  </article>
  <!-- Article END -->
  <!-- Catalog START -->
  
    <aside class="catalog-container">
  <div class="toc-main">
    <strong class="toc-title">Catalog</strong>
    
      <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#1-å¥—æ¥å­—"><span class="toc-nav-text">1 å¥—æ¥å­—</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-1-åŸºæœ¬åŸç†"><span class="toc-nav-text">1.1 åŸºæœ¬åŸç†</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-2-å®ç°"><span class="toc-nav-text">1.2 å®ç°</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-3-å‚è€ƒèµ„æº"><span class="toc-nav-text">1.3 å‚è€ƒèµ„æº</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-4-é—®é¢˜"><span class="toc-nav-text">1.4 é—®é¢˜</span></a></li></ol></li></ol>
    
  </div>
</aside>
  
  <!-- Catalog END -->
</main>

<script>
  (function () {
    var url = 'https://qiwsir.github.io/2020/04/28/web-stack-second/';
    var banner = ''
    /*if (banner !== '' && banner !== 'undefined' && banner !== 'null') {
      $('#article-banner').css({
        'background-image': 'url(' + banner + ')'
      })
    } else {
      $('#article-banner').geopattern(url)
    }*/
    //$('.header').removeClass('fixed-header')

    // error image
    $(".markdown-content img").on('error', function() {
      $(this).attr('src', 'http://file.muyutech.com/error-img.png')
      $(this).css({
        'cursor': 'default'
      })
    })

    // zoom image
    $(".markdown-content img").on('click', function() {
      var src = $(this).attr('src')
      if (src !== 'http://file.muyutech.com/error-img.png') {
        var imageW = $(this).width()
        var imageH = $(this).height()

        var zoom = ($(window).width() * 0.95 / imageW).toFixed(2)
        zoom = zoom < 1 ? 1 : zoom
        zoom = zoom > 2 ? 2 : zoom
        var transY = (($(window).height() - imageH) / 2).toFixed(2)

        $('body').append('<div class="image-view-wrap"><div class="image-view-inner"><img src="'+ src +'" /></div></div>')
        $('.image-view-wrap').addClass('wrap-active')
        $('.image-view-wrap img').css({
          'width': `${imageW}`,
          'transform': `translate3d(0, ${transY}px, 0) scale3d(${zoom}, ${zoom}, 1)`
        })
        $('html').css('overflow', 'hidden')

        $('.image-view-wrap').on('click', function() {
          $(this).remove()
          $('html').attr('style', '')
        })
      }
    })
  })();
</script>







    <div class="scroll-top">
  <span class="arrow-icon"></span>
</div>
    <footer class="app-footer">
  <p class="copyright">
    &copy; 2020 | Proudly powered by è€é½æ•™å®¤ | <a href='http://www.beian.miit.gov.cn' target="_blank" rel="noopener">è‹ICPå¤‡13034293å·-2 </a>
  </p>
</footer>

<script>
  function async(u, c) {
    var d = document, t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
    s.parentNode.insertBefore(o, s);
  }
</script>
<script>
  async("//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js", function(){
    FastClick.attach(document.body);
  })
</script>

<script>
  var hasLine = 'true';
  async("//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js", function(){
    $('figure pre').each(function(i, block) {
      var figure = $(this).parents('figure');
      if (hasLine === 'false') {
        figure.find('.gutter').hide();
      }
      var lang = figure.attr('class').split(' ')[1] || 'code';
      var codeHtml = $(this).html();
      var codeTag = document.createElement('code');
      codeTag.className = lang;
      codeTag.innerHTML = codeHtml;
      $(this).attr('class', '').empty().html(codeTag);
      figure.attr('data-lang', lang.toUpperCase());
      hljs.highlightBlock(block);
    });
  })
</script>
<!-- Baidu Tongji -->


<script src="/js/script.js"></script>

  </body>
</html>