<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <meta name="description" content="专注于编程技术和数据科学、人工智能">
  <meta name="keyword" content="人工智能, 数据科学, Python, 编程, 程序员, 开发者, web, 网站, 语言, 程序, UI, 美工, 设计师">
  
    <link rel="shortcut icon" href="/css/images/logo.png">
  
  <title>
    
      remove column from dataframe | 老齐教室
    
  </title>
  <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.css" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/tomorrow.min.css" rel="stylesheet">
  
<link rel="stylesheet" href="/css/style.css">

  
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/geopattern/1.2.3/js/geopattern.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.js"></script>
  
  
  
  
    <!-- MathJax support START -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <!-- MathJax support END -->
  


<meta name="generator" content="Hexo 4.2.0"></head>
<div class="wechat-share">
  <img src="/css/images/logo.png" />
</div>

  <body>
    <header class="header fixed-header">
  <div class="header-container">
    <a class="home-link" href="/">
      <div class="logo"></div>
      <span>老齐教室</span>
    </a>
    <ul class="right-list">
      
        <li class="list-item">
          
            <a href="/" class="item-link">首页</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/tags/" class="item-link">书籍</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/courses/" class="item-link">课程</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/archives/" class="item-link">类目</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/resources/" class="item-link">资源</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/about/" class="item-link">关于</a>
          
        </li>
      
    </ul>
    <div class="menu">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </div>
    <div class="menu-mask">
      <ul class="menu-list">
        
          <li class="menu-item">
            
              <a href="/" class="menu-link">首页</a>
            

          </li>
        
          <li class="menu-item">
            
              <a href="/tags/" class="menu-link">书籍</a>
            

          </li>
        
          <li class="menu-item">
            
              <a href="/courses/" class="menu-link">课程</a>
            

          </li>
        
          <li class="menu-item">
            
              <a href="/archives/" class="menu-link">类目</a>
            

          </li>
        
          <li class="menu-item">
            
              <a href="/resources/" class="menu-link">资源</a>
            

          </li>
        
          <li class="menu-item">
            
              <a href="/about/" class="menu-link">关于</a>
            

          </li>
        
      </ul>
    </div>
  </div>
</header>

    <div id="article-banner">
  
  <!-- <div class="arrow-down">
    <a href="javascript:;"></a>
  </div> -->
</div>
<main class="app-body flex-box">
  <!-- Article START -->
  <article class="post-article">
    <h2>remove column from dataframe</h2>
    <p class="post-date">2021-03-10</p>
    <section class="markdown-content"><h1 id="How-to-remove-a-column-from-a-DataFrame-with-some-extra-detail"><a href="#How-to-remove-a-column-from-a-DataFrame-with-some-extra-detail" class="headerlink" title="How to remove a column from a DataFrame, with some extra detail"></a>How to remove a column from a DataFrame, with some extra detail</h1><p>Removing one or more columns from a pandas <code>DataFrame</code> is a pretty common task, but it turns out there are a number of possible ways to perform this task. I found that <a href="https://stackoverflow.com/questions/13411544/delete-column-from-pandas-dataframe" target="_blank" rel="noopener">this StackOverflow question</a>, along with solutions and discussion in it raised a number of  interesting topics. It is worth digging in a little bit to the details.</p>
<p>First, what’s the “correct” way to remove a column from a <code>DataFrame</code>? The standard way to do this is to think in SQL and use <code>drop</code>.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">df = pd.DataFrame(np.arange(<span class="number">25</span>).reshape((<span class="number">5</span>,<span class="number">5</span>)), columns=list(<span class="string">"abcde"</span>))</span><br><span class="line"></span><br><span class="line">display(df)</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    df.drop(<span class="string">'b'</span>)</span><br><span class="line"><span class="keyword">except</span> KeyError <span class="keyword">as</span> ke:</span><br><span class="line">    print(ke)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">    a   b   c   d   e</span><br><span class="line"><span class="number">0</span>   <span class="number">0</span>   <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span></span><br><span class="line"><span class="number">1</span>   <span class="number">5</span>   <span class="number">6</span>   <span class="number">7</span>   <span class="number">8</span>   <span class="number">9</span></span><br><span class="line"><span class="number">2</span>  <span class="number">10</span>  <span class="number">11</span>  <span class="number">12</span>  <span class="number">13</span>  <span class="number">14</span></span><br><span class="line"><span class="number">3</span>  <span class="number">15</span>  <span class="number">16</span>  <span class="number">17</span>  <span class="number">18</span>  <span class="number">19</span></span><br><span class="line"><span class="number">4</span>  <span class="number">20</span>  <span class="number">21</span>  <span class="number">22</span>  <span class="number">23</span>  <span class="number">24</span></span><br><span class="line"><span class="string">"['b'] not found in axis"</span></span><br></pre></td></tr></table></figure>



<p>Wait, what? Why an error? That’s because the default axis that <code>drop</code> works with is the rows. As with many pandas methods, there’s more than one  way to invoke the method (which some people find frustrating). </p>
<p>You can drop rows using <code>axis=0</code> or <code>axis=&#39;rows&#39;</code>, or using the <code>labels</code> argument.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">df.drop(<span class="number">0</span>)                <span class="comment"># drop a row, on axis 0 or 'rows'</span></span><br><span class="line">df.drop(<span class="number">0</span>, axis=<span class="number">0</span>)        <span class="comment"># same</span></span><br><span class="line">df.drop(<span class="number">0</span>, axis=<span class="string">'rows'</span>)   <span class="comment"># same</span></span><br><span class="line">df.drop(labels=<span class="number">0</span>)         <span class="comment"># same</span></span><br><span class="line">df.drop(labels=[<span class="number">0</span>])       <span class="comment"># same</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 结果</span></span><br><span class="line">    a   b   c   d   e</span><br><span class="line"><span class="number">1</span>   <span class="number">5</span>   <span class="number">6</span>   <span class="number">7</span>   <span class="number">8</span>   <span class="number">9</span></span><br><span class="line"><span class="number">2</span>  <span class="number">10</span>  <span class="number">11</span>  <span class="number">12</span>  <span class="number">13</span>  <span class="number">14</span></span><br><span class="line"><span class="number">3</span>  <span class="number">15</span>  <span class="number">16</span>  <span class="number">17</span>  <span class="number">18</span>  <span class="number">19</span></span><br><span class="line"><span class="number">4</span>  <span class="number">20</span>  <span class="number">21</span>  <span class="number">22</span>  <span class="number">23</span>  <span class="number">24</span></span><br></pre></td></tr></table></figure>

<h3 id="Again-how-do-we-drop-a-column"><a href="#Again-how-do-we-drop-a-column" class="headerlink" title="Again, how do we drop a column?"></a>Again, how do we drop a column?</h3><p>We want to drop a column, so what does that look like? You can specify the <code>axis</code> or use the <code>columns</code> parameter.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">df.drop(<span class="string">'b'</span>, axis=<span class="number">1</span>)         <span class="comment"># drop a column</span></span><br><span class="line">df.drop(<span class="string">'b'</span>, axis=<span class="string">'columns'</span>) <span class="comment"># same</span></span><br><span class="line">df.drop(columns=<span class="string">'b'</span>)         <span class="comment"># same</span></span><br><span class="line">df.drop(columns=[<span class="string">'b'</span>])       <span class="comment"># same</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># result</span></span><br><span class="line">    a   c   d   e</span><br><span class="line"><span class="number">0</span>   <span class="number">0</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span></span><br><span class="line"><span class="number">1</span>   <span class="number">5</span>   <span class="number">7</span>   <span class="number">8</span>   <span class="number">9</span></span><br><span class="line"><span class="number">2</span>  <span class="number">10</span>  <span class="number">12</span>  <span class="number">13</span>  <span class="number">14</span></span><br><span class="line"><span class="number">3</span>  <span class="number">15</span>  <span class="number">17</span>  <span class="number">18</span>  <span class="number">19</span></span><br><span class="line"><span class="number">4</span>  <span class="number">20</span>  <span class="number">22</span>  <span class="number">23</span>  <span class="number">24</span></span><br></pre></td></tr></table></figure>



<p>There you go, that’s how you drop a column. Now you have to either assign to a new variable, or back to your old variable, or pass in <code>inplace=True</code> to make the change permanent.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">df2 = df.drop(<span class="string">'b'</span>, axis=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">print(df2.columns)</span><br><span class="line">print(df.columns)</span><br><span class="line"></span><br><span class="line"><span class="comment"># result</span></span><br><span class="line">Index([<span class="string">'a'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>], dtype=<span class="string">'object'</span>)</span><br><span class="line">Index([<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>], dtype=<span class="string">'object'</span>)</span><br></pre></td></tr></table></figure>

<p>It’s also worth noting that you can drop <em>both</em> rows and columns at the same time using drop by using the <code>index</code> and <code>columns</code> arguments at once, and you can pass in multiple values.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">df.drop(index=[<span class="number">0</span>,<span class="number">2</span>], columns=[<span class="string">'b'</span>,<span class="string">'c'</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># result</span></span><br><span class="line">    a   d   e</span><br><span class="line"><span class="number">1</span>   <span class="number">5</span>   <span class="number">8</span>   <span class="number">9</span></span><br><span class="line"><span class="number">3</span>  <span class="number">15</span>  <span class="number">18</span>  <span class="number">19</span></span><br><span class="line"><span class="number">4</span>  <span class="number">20</span>  <span class="number">23</span>  <span class="number">24</span></span><br></pre></td></tr></table></figure>

<p>If you didn’t have the drop method, you can basically obtain the same  results through indexing. There are many ways to accomplish this, but  one equivalent solution is indexing using the <code>.loc</code> indexer and <code>isin</code>, along with inverting the selection.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">df.loc[~df.index.isin([<span class="number">0</span>,<span class="number">2</span>]), ~df.columns.isin([<span class="string">'b'</span>, <span class="string">'c'</span>])]</span><br><span class="line"></span><br><span class="line"><span class="comment"># result</span></span><br><span class="line">    a   d   e</span><br><span class="line"><span class="number">1</span>   <span class="number">5</span>   <span class="number">8</span>   <span class="number">9</span></span><br><span class="line"><span class="number">3</span>  <span class="number">15</span>  <span class="number">18</span>  <span class="number">19</span></span><br><span class="line"><span class="number">4</span>  <span class="number">20</span>  <span class="number">23</span>  <span class="number">24</span></span><br></pre></td></tr></table></figure>

<p>If none of that makes sense to you, I would suggest reading through my series on selecting and indexing in pandas, starting <a href="https://www.wrighters.io/indexing-and-selecting-in-pandas-part-1/" target="_blank" rel="noopener">here</a>.</p>
<h2 id="Back-to-the-question"><a href="#Back-to-the-question" class="headerlink" title="Back to the question"></a>Back to the question</h2><p>Looking back at the original question though, we see there is another available technique for removing a column.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">del</span> df[<span class="string">'a'</span>]</span><br><span class="line">df</span><br><span class="line"></span><br><span class="line"><span class="comment"># result</span></span><br><span class="line">    b   c   d   e</span><br><span class="line"><span class="number">0</span>   <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span></span><br><span class="line"><span class="number">1</span>   <span class="number">6</span>   <span class="number">7</span>   <span class="number">8</span>   <span class="number">9</span></span><br><span class="line"><span class="number">2</span>  <span class="number">11</span>  <span class="number">12</span>  <span class="number">13</span>  <span class="number">14</span></span><br><span class="line"><span class="number">3</span>  <span class="number">16</span>  <span class="number">17</span>  <span class="number">18</span>  <span class="number">19</span></span><br><span class="line"><span class="number">4</span>  <span class="number">21</span>  <span class="number">22</span>  <span class="number">23</span>  <span class="number">24</span></span><br></pre></td></tr></table></figure>

<p>Poof! It’s gone. This is like doing a drop with <code>inplace=True</code>. </p>
<h2 id="What-about-attribute-access"><a href="#What-about-attribute-access" class="headerlink" title="What about attribute access?"></a>What about attribute access?</h2><p>We also know that we can use attribute access to <em>select</em> columns of a <code>DataFrame</code>.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">df.b</span><br><span class="line"></span><br><span class="line"><span class="comment"># result</span></span><br><span class="line"><span class="number">0</span>     <span class="number">1</span></span><br><span class="line"><span class="number">1</span>     <span class="number">6</span></span><br><span class="line"><span class="number">2</span>    <span class="number">11</span></span><br><span class="line"><span class="number">3</span>    <span class="number">16</span></span><br><span class="line"><span class="number">4</span>    <span class="number">21</span></span><br><span class="line">Name: b, dtype: int64</span><br></pre></td></tr></table></figure>

<p>Can we delete the column this way?</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">del</span> df.b</span><br><span class="line"></span><br><span class="line"><span class="comment"># result</span></span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line">AttributeError                            Traceback (most recent call last)</span><br><span class="line">&lt;ipython-input<span class="number">-10</span><span class="number">-0</span>dca358a6ef9&gt; <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">----&gt; 1 del df.b</span><br><span class="line"></span><br><span class="line">AttributeError: b</span><br></pre></td></tr></table></figure>

<p>We cannot. This is not an option for removing columns with the current pandas design. Is this technically impossible? How come <code>del df[&#39;b&#39;]</code>works but <code>del df.b</code> doesn’t?. Let’s dig into those details and see whether it would be possible to make the second work as well.</p>
<p>The first version works because in pandas, the <code>DataFrame</code> implements the <code>__delitem__</code> method which gets invoked when you execute <code>del df[&#39;b&#39;]</code>. But what about <code>del df.b</code>, is there a way to handle that?</p>
<p>First, let’s make a simple class that shows how this works under the hood. Instead of being a real <code>DataFrame</code>, we’ll just use a <code>dict</code> as a container for our columns (which could really contain anything, we’re not doing any indexing here).</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StupidFrame</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, columns)</span>:</span></span><br><span class="line">        self.columns = columns</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__delitem__</span><span class="params">(self, item)</span>:</span></span><br><span class="line">        <span class="keyword">del</span> self.columns[item]</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span><span class="params">(self, item)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.columns[item]</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__setitem__</span><span class="params">(self, item, val)</span>:</span></span><br><span class="line">        self.columns[item] = val</span><br><span class="line">            </span><br><span class="line">f = StupidFrame(&#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'b'</span>: <span class="number">2</span>, <span class="string">'c'</span>: <span class="number">3</span>&#125;)</span><br><span class="line">print(<span class="string">"StupidFrame value for a:"</span>, f[<span class="string">'a'</span>])</span><br><span class="line">print(<span class="string">"StupidFrame columns: "</span>, f.columns)</span><br><span class="line"><span class="keyword">del</span> f[<span class="string">'b'</span>]</span><br><span class="line">f.d = <span class="number">4</span></span><br><span class="line">print(<span class="string">"StupidFrame columns: "</span>, f.columns)</span><br><span class="line"></span><br><span class="line"><span class="comment"># result</span></span><br><span class="line">StupidFrame value <span class="keyword">for</span> a: <span class="number">1</span></span><br><span class="line">StupidFrame columns:  &#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'b'</span>: <span class="number">2</span>, <span class="string">'c'</span>: <span class="number">3</span>&#125;</span><br><span class="line">StupidFrame columns:  &#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'c'</span>: <span class="number">3</span>&#125;</span><br></pre></td></tr></table></figure>

<p>A couple of things to note here. First, we how that we can access the data in our <code>StupidFrame</code> with the index operators (<code>[]</code>), and use that for setting, getting, and deleting items. When we assigned <code>d</code> to our frame, it wasn’t added to our columns because it’s just a normal  instance attribute. If we wanted to be able to handle the columns as  attributes, we have to do a little bit more work.</p>
<p>So following the example from pandas (which supports attribute access of columns), we add the <code>__getattr__</code> method, but we also will handle setting it with the <code>__setattr__</code> method and pretend that any attribute assignment is a ‘column’. We have to update our instance dictionary (<strong>`dict</strong>`) directly to avoid an infinite recursion.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StupidFrameAttr</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, columns)</span>:</span></span><br><span class="line">        self.__dict__[<span class="string">'columns'</span>] = columns</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__delitem__</span><span class="params">(self, item)</span>:</span></span><br><span class="line">        <span class="keyword">del</span> self.__dict__[<span class="string">'columns'</span>][item]</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span><span class="params">(self, item)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.__dict__[<span class="string">'columns'</span>][item]</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__setitem__</span><span class="params">(self, item, val)</span>:</span></span><br><span class="line">        self.__dict__[<span class="string">'columns'</span>][item] = val</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getattr__</span><span class="params">(self, item)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> item <span class="keyword">in</span> self.__dict__[<span class="string">'columns'</span>]:</span><br><span class="line">            <span class="keyword">return</span> self.__dict__[<span class="string">'columns'</span>][item]</span><br><span class="line">        <span class="keyword">elif</span> item == <span class="string">'columns'</span>:</span><br><span class="line">            <span class="keyword">return</span> self.__dict__[item]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> AttributeError</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__setattr__</span><span class="params">(self, item, val)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> item != <span class="string">'columns'</span>:</span><br><span class="line">            self.__dict__[<span class="string">'columns'</span>][item] = val</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">"Overwriting columns prohibited"</span>) </span><br><span class="line"></span><br><span class="line">            </span><br><span class="line">f = StupidFrameAttr(&#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'b'</span>: <span class="number">2</span>, <span class="string">'c'</span>: <span class="number">3</span>&#125;)</span><br><span class="line">print(<span class="string">"StupidFrameAttr value for a"</span>, f[<span class="string">'a'</span>])</span><br><span class="line">print(<span class="string">"StupidFrameAttr columns: "</span>, f.columns)</span><br><span class="line"><span class="keyword">del</span> f[<span class="string">'b'</span>]</span><br><span class="line">print(<span class="string">"StupidFrameAttr columns: "</span>, f.columns)</span><br><span class="line">print(<span class="string">"StupidFrameAttr value for a"</span>, f.a)</span><br><span class="line">f.d = <span class="number">4</span></span><br><span class="line">print(<span class="string">"StupidFrameAttr columns: "</span>, f.columns)</span><br><span class="line"><span class="keyword">del</span> f[<span class="string">'d'</span>]</span><br><span class="line">print(<span class="string">"StupidFrameAttr columns: "</span>, f.columns)</span><br><span class="line">f.d = <span class="number">5</span></span><br><span class="line">print(<span class="string">"StupidFrameAttr columns: "</span>, f.columns)</span><br><span class="line"><span class="keyword">del</span> f.d</span><br><span class="line"></span><br><span class="line"><span class="comment"># result</span></span><br><span class="line">StupidFrameAttr value <span class="keyword">for</span> a <span class="number">1</span></span><br><span class="line">StupidFrameAttr columns:  &#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'b'</span>: <span class="number">2</span>, <span class="string">'c'</span>: <span class="number">3</span>&#125;</span><br><span class="line">StupidFrameAttr columns:  &#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'c'</span>: <span class="number">3</span>&#125;</span><br><span class="line">StupidFrameAttr value <span class="keyword">for</span> a <span class="number">1</span></span><br><span class="line">StupidFrameAttr columns:  &#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'c'</span>: <span class="number">3</span>, <span class="string">'d'</span>: <span class="number">4</span>&#125;</span><br><span class="line">StupidFrameAttr columns:  &#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'c'</span>: <span class="number">3</span>&#125;</span><br><span class="line">StupidFrameAttr columns:  &#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'c'</span>: <span class="number">3</span>, <span class="string">'d'</span>: <span class="number">5</span>&#125;</span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line">AttributeError                            Traceback (most recent call last)</span><br><span class="line">&lt;ipython-input<span class="number">-12</span>-fd29f59ea01e&gt; <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">     <span class="number">39</span> f.d = <span class="number">5</span></span><br><span class="line">     <span class="number">40</span> print(<span class="string">"StupidFrameAttr columns: "</span>, f.columns)</span><br><span class="line">---&gt; 41 del f.d</span><br><span class="line"></span><br><span class="line">AttributeError: d</span><br></pre></td></tr></table></figure>

<h2 id="How-could-we-handle-deletion"><a href="#How-could-we-handle-deletion" class="headerlink" title="How could we handle deletion?"></a>How could we handle deletion?</h2><p>Everything works but deletion using attribute access. We handle setting/getting columns using both the array index operator (<code>[]</code>) and attribute access. But what about detecting deletion? Is that possible?</p>
<p>One way to do this is using the <code>__delattr__</code> method, which is described in the <a href="https://docs.python.org/3.8/reference/datamodel.html" target="_blank" rel="noopener">data model</a> documentation. If you define this method in your class, it will be invoked instead of  updating an instance’s attribute dictionary directly. This gives us a  chance to redirect this to our columns instance.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StupidFrameDelAttr</span><span class="params">(StupidFrameAttr)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__delattr__</span><span class="params">(self, item)</span>:</span></span><br><span class="line">        <span class="comment"># trivial implementation using the data model methods</span></span><br><span class="line">        <span class="keyword">del</span> self.__dict__[<span class="string">'columns'</span>][item]</span><br><span class="line"></span><br><span class="line">f = StupidFrameDelAttr(&#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'b'</span>: <span class="number">2</span>, <span class="string">'c'</span>: <span class="number">3</span>&#125;)</span><br><span class="line">print(<span class="string">"StupidFrameDelAttr value for a"</span>, f[<span class="string">'a'</span>])</span><br><span class="line">print(<span class="string">"StupidFrameDelAttr columns: "</span>, f.columns)</span><br><span class="line"><span class="keyword">del</span> f[<span class="string">'b'</span>]</span><br><span class="line">print(<span class="string">"StupidFrameDelAttr columns: "</span>, f.columns)</span><br><span class="line">print(<span class="string">"StupidFrameDelAttr value for a"</span>, f.a)</span><br><span class="line">f.d = <span class="number">4</span></span><br><span class="line">print(<span class="string">"StupidFrameDelAttr columns: "</span>, f.columns)</span><br><span class="line"><span class="keyword">del</span> f.d </span><br><span class="line">print(<span class="string">"StupidFrameDelAttr columns: "</span>, f.columns)</span><br><span class="line"></span><br><span class="line"><span class="comment"># result</span></span><br><span class="line">StupidFrameDelAttr value <span class="keyword">for</span> a <span class="number">1</span></span><br><span class="line">StupidFrameDelAttr columns:  &#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'b'</span>: <span class="number">2</span>, <span class="string">'c'</span>: <span class="number">3</span>&#125;</span><br><span class="line">StupidFrameDelAttr columns:  &#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'c'</span>: <span class="number">3</span>&#125;</span><br><span class="line">StupidFrameDelAttr value <span class="keyword">for</span> a <span class="number">1</span></span><br><span class="line">StupidFrameDelAttr columns:  &#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'c'</span>: <span class="number">3</span>, <span class="string">'d'</span>: <span class="number">4</span>&#125;</span><br><span class="line">StupidFrameDelAttr columns:  &#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'c'</span>: <span class="number">3</span>&#125;</span><br></pre></td></tr></table></figure>

<p>Now I’m not suggesting that attribute deletion for columns would be easy to add to pandas, but at least this shows how it could be possible. In the case of current pandas, deleting columns is best done using <code>drop</code>.</p>
<p>Also, it’s worth mentioning here that when you create a new column in pandas, you don’t assign it as an attribute. To better understand how to  properly create a column, you can check out <a href="https://www.wrighters.io/basic-pandas-how-to-add-a-column-to-a-dataframe/" target="_blank" rel="noopener">this article</a>.</p>
<p>If you already knew how to drop a column in pandas, hopefully you understand a little bit more about how this works.                                                        </p>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p>[1]. <a href="https://www.wrighters.io/how-to-remove-a-column-from-a-dataframe/" target="_blank" rel="noopener">https://www.wrighters.io/how-to-remove-a-column-from-a-dataframe/</a></p>
</section>
    <!-- Tags START -->
    
    <!-- Tags END -->
    <!-- NAV START -->
    
  <div class="nav-container">
    <!-- reverse left and right to put prev and next in a more logic postition -->
    
      <a class="nav-left" href="/2021/03/08/virtual-environments/">
        <span class="nav-arrow">← </span>
        
          Python虚拟环境
        
      </a>
    
    
  </div>

    <!-- NAV END -->
    <!-- 打赏 START -->
    
      <div class="money-like">
        <div class="reward-btn">
          赏
          <span class="money-code">
            <span class="alipay-code">
              <div class="code-image"></div>
              <b>使用支付宝打赏</b>
            </span>
            <span class="wechat-code">
              <div class="code-image"></div>
              <b>使用微信打赏</b>
            </span>
          </span>
        </div>
        <p class="notice">若你觉得我的文章对你有帮助，欢迎点击上方按钮对我打赏</p>
      </div>
    
    <!-- 打赏 END -->
    <!-- 二维码 START -->
    <!--% if (theme.qrcode) { %-->
      <div class="qrcode">
        <!--canvas id="share-qrcode"></!--canvas-->
        <img src="https://public-tuchuang.oss-cn-hangzhou.aliyuncs.com/WechatIMG6_20200109154827.jpeg" width=400>
        <p class="notice">关注微信公众号，读文章、听课程，提升技能</p>
      </div>
    <!--% } %-->
    <!-- 二维码 END -->
    
      <!-- No Comment -->
    
  </article>
  <!-- Article END -->
  <!-- Catalog START -->
  
    <aside class="catalog-container">
  <div class="toc-main">
    <strong class="toc-title">Catalog</strong>
    
      <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#How-to-remove-a-column-from-a-DataFrame-with-some-extra-detail"><span class="toc-nav-text">How to remove a column from a DataFrame, with some extra detail</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Again-how-do-we-drop-a-column"><span class="toc-nav-text">Again, how do we drop a column?</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Back-to-the-question"><span class="toc-nav-text">Back to the question</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#What-about-attribute-access"><span class="toc-nav-text">What about attribute access?</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#How-could-we-handle-deletion"><span class="toc-nav-text">How could we handle deletion?</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#参考文献"><span class="toc-nav-text">参考文献</span></a></li></ol></li></ol>
    
  </div>
</aside>
  
  <!-- Catalog END -->
</main>

<script>
  (function () {
    var url = 'https://qiwsir.github.io/2021/03/10/remove-column-from-dataframe/';
    var banner = ''
    /*if (banner !== '' && banner !== 'undefined' && banner !== 'null') {
      $('#article-banner').css({
        'background-image': 'url(' + banner + ')'
      })
    } else {
      $('#article-banner').geopattern(url)
    }*/
    //$('.header').removeClass('fixed-header')

    // error image
    $(".markdown-content img").on('error', function() {
      $(this).attr('src', 'http://file.muyutech.com/error-img.png')
      $(this).css({
        'cursor': 'default'
      })
    })

    // zoom image
    $(".markdown-content img").on('click', function() {
      var src = $(this).attr('src')
      if (src !== 'http://file.muyutech.com/error-img.png') {
        var imageW = $(this).width()
        var imageH = $(this).height()

        var zoom = ($(window).width() * 0.95 / imageW).toFixed(2)
        zoom = zoom < 1 ? 1 : zoom
        zoom = zoom > 2 ? 2 : zoom
        var transY = (($(window).height() - imageH) / 2).toFixed(2)

        $('body').append('<div class="image-view-wrap"><div class="image-view-inner"><img src="'+ src +'" /></div></div>')
        $('.image-view-wrap').addClass('wrap-active')
        $('.image-view-wrap img').css({
          'width': `${imageW}`,
          'transform': `translate3d(0, ${transY}px, 0) scale3d(${zoom}, ${zoom}, 1)`
        })
        $('html').css('overflow', 'hidden')

        $('.image-view-wrap').on('click', function() {
          $(this).remove()
          $('html').attr('style', '')
        })
      }
    })
  })();
</script>







    <div class="scroll-top">
  <span class="arrow-icon"></span>
</div>
    <footer class="app-footer">
  <p class="copyright">
    &copy; 2021 | Proudly powered by 老齐教室 | <a href='http://www.beian.miit.gov.cn' target="_blank" rel="noopener">苏ICP备13034293号-2 </a>
  </p>
</footer>

<script>
  function async(u, c) {
    var d = document, t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
    s.parentNode.insertBefore(o, s);
  }
</script>
<script>
  async("//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js", function(){
    FastClick.attach(document.body);
  })
</script>

<script>
  var hasLine = 'true';
  async("//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js", function(){
    $('figure pre').each(function(i, block) {
      var figure = $(this).parents('figure');
      if (hasLine === 'false') {
        figure.find('.gutter').hide();
      }
      var lang = figure.attr('class').split(' ')[1] || 'code';
      var codeHtml = $(this).html();
      var codeTag = document.createElement('code');
      codeTag.className = lang;
      codeTag.innerHTML = codeHtml;
      $(this).attr('class', '').empty().html(codeTag);
      figure.attr('data-lang', lang.toUpperCase());
      hljs.highlightBlock(block);
    });
  })
</script>
<!-- Baidu Tongji -->


<script src="/js/script.js"></script>

  </body>
</html>