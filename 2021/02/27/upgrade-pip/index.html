<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <meta name="description" content="专注于编程技术和数据科学、人工智能">
  <meta name="keyword" content="人工智能, 数据科学, Python, 编程, 程序员, 开发者, web, 网站, 语言, 程序, UI, 美工, 设计师">
  
    <link rel="shortcut icon" href="/css/images/logo.png">
  
  <title>
    
      必须升级pip，为什么？！ | 老齐教室
    
  </title>
  <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.css" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/tomorrow.min.css" rel="stylesheet">
  
<link rel="stylesheet" href="/css/style.css">

  
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/geopattern/1.2.3/js/geopattern.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.js"></script>
  
  
  
  
    <!-- MathJax support START -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <!-- MathJax support END -->
  


<meta name="generator" content="Hexo 4.2.0"></head>
<div class="wechat-share">
  <img src="/css/images/logo.png" />
</div>

  <body>
    <header class="header fixed-header">
  <div class="header-container">
    <a class="home-link" href="/">
      <div class="logo"></div>
      <span>老齐教室</span>
    </a>
    <ul class="right-list">
      
        <li class="list-item">
          
            <a href="/" class="item-link">首页</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/tags/" class="item-link">书籍</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/courses/" class="item-link">课程</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/archives/" class="item-link">类目</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/resources/" class="item-link">资源</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/about/" class="item-link">关于</a>
          
        </li>
      
    </ul>
    <div class="menu">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </div>
    <div class="menu-mask">
      <ul class="menu-list">
        
          <li class="menu-item">
            
              <a href="/" class="menu-link">首页</a>
            

          </li>
        
          <li class="menu-item">
            
              <a href="/tags/" class="menu-link">书籍</a>
            

          </li>
        
          <li class="menu-item">
            
              <a href="/courses/" class="menu-link">课程</a>
            

          </li>
        
          <li class="menu-item">
            
              <a href="/archives/" class="menu-link">类目</a>
            

          </li>
        
          <li class="menu-item">
            
              <a href="/resources/" class="menu-link">资源</a>
            

          </li>
        
          <li class="menu-item">
            
              <a href="/about/" class="menu-link">关于</a>
            

          </li>
        
      </ul>
    </div>
  </div>
</header>

    <div id="article-banner">
  
  <!-- <div class="arrow-down">
    <a href="javascript:;"></a>
  </div> -->
</div>
<main class="app-body flex-box">
  <!-- Article START -->
  <article class="post-article">
    <h2>必须升级pip，为什么？！</h2>
    <p class="post-date">2021-02-27</p>
    <section class="markdown-content"><p>在《Python大学实用教程》和《跟老齐学Python：轻松入门》两本书中，都介绍了如何安装第三方库的方法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install package-name</span><br></pre></td></tr></table></figure>

<p>在用<code>pip</code>安装第三方库或者模块的时候，如果检测到本地的<code>pip</code>版本过低，会提示升级。有的人觉得升级比较麻烦，就放弃了。</p>
<p>本文就要重点讲一讲，为什么要必须升级<code>pip</code>。</p>
<p>先说结论，如果该升级的时候不升级，结果是：可能会导致安装某些东西的时候失败；或者安装进程很慢，或者给你带来其他麻烦。</p>
<p>所以，如果不升级，后果很严重。</p>
<h2 id="老版本的问题"><a href="#老版本的问题" class="headerlink" title="老版本的问题"></a>老版本的问题</h2><p>下面是在Docker中运行Ubuntu 18.04，这个操作系统是2018年发布的，里面默认安装了Python3.6以及<code>pip</code>的9.0.1版。下面就在这个配置下进行演示。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[itamarst@blake dev]$ docker run -it ubuntu:18.04</span><br><span class="line">root@1a43d55f0524:&#x2F;# apt-get update</span><br><span class="line">...</span><br><span class="line">root@1a43d55f0524:&#x2F;# apt-get install --no-install-recommends python3 python3-pip</span><br><span class="line">...</span><br><span class="line">root@1a43d55f0524:&#x2F;# pip3 --version</span><br><span class="line">pip 9.0.1 from &#x2F;usr&#x2F;lib&#x2F;python3&#x2F;dist-packages (python 3.6)</span><br></pre></td></tr></table></figure>

<p>环境准备好之后，就安装一个名为<code>cryptography</code>的库，这个库是PyPI上下载量非常大的一个库，每月都有上百万的下载。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">root@1a43d55f0524:&#x2F;# pip3 install cryptography</span><br><span class="line">Collecting cryptography</span><br><span class="line">  Downloading https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;fa&#x2F;2d&#x2F;2154d8cb773064570f48ec0b60258a4522490fcb115a6c7c9423482ca993&#x2F;cryptography-3.4.6.tar.gz (546kB)</span><br><span class="line">    100% |################################| 552kB 1.4MB&#x2F;s </span><br><span class="line">    Complete output from command python setup.py egg_info:</span><br><span class="line">    Traceback (most recent call last):</span><br><span class="line">      File &quot;&lt;string&gt;&quot;, line 1, in &lt;module&gt;</span><br><span class="line">    ModuleNotFoundError: No module named &#39;setuptools&#39;</span><br><span class="line">    </span><br><span class="line">    ----------------------------------------</span><br><span class="line">Command &quot;python setup.py egg_info&quot; failed with error code 1 in &#x2F;tmp&#x2F;pip-build-6jesygn0&#x2F;cryptography&#x2F;</span><br></pre></td></tr></table></figure>

<p>安装失败。</p>
<p>这里的错误说明，<code>pip</code>要编译<code>cryptography</code>，必须它要找到<code>setuptools</code>，但结果没找到，于是报错了。</p>
<p>类似的问题，也不是仅仅发生在安装上面的库，安装其他库也如此，再如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">root@1a43d55f0524:&#x2F;# pip3 install pyarrow</span><br><span class="line">Collecting pyarrow</span><br><span class="line">  Downloading https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;62&#x2F;d3&#x2F;a482d8a4039bf931ed6388308f0cc0541d0cab46f0bbff7c897a74f1c576&#x2F;pyarrow-3.0.0.tar.gz (682kB)</span><br><span class="line">    100% |################################| 686kB 1.1MB&#x2F;s </span><br><span class="line">    Complete output from command python setup.py egg_info:</span><br><span class="line">    Traceback (most recent call last):</span><br><span class="line">      File &quot;&lt;string&gt;&quot;, line 1, in &lt;module&gt;</span><br><span class="line">    ModuleNotFoundError: No module named &#39;setuptools&#39;</span><br><span class="line">    </span><br><span class="line">    ----------------------------------------</span><br><span class="line">Command &quot;python setup.py egg_info&quot; failed with error code 1 in &#x2F;tmp&#x2F;pip-build-heq6zwd7&#x2F;pyarrow&#x2F;</span><br></pre></td></tr></table></figure>

<p>同样的错误。</p>
<p>当然，如果你碰巧这样安装了：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">root@1a43d55f0524:&#x2F;# pip3 install filprofiler</span><br><span class="line">Collecting filprofiler</span><br><span class="line">  Downloading https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;e3&#x2F;a2&#x2F;843e7b5f1aba27effb0146c7e564e2592bfc9344a8c8ef0d55245bd47508&#x2F;filprofiler-0.7.2-cp36-cp36m-manylinux1_x86_64.whl (565kB)</span><br><span class="line">    100% |################################| 573kB 1.8MB&#x2F;s </span><br><span class="line">Installing collected packages: filprofiler</span><br><span class="line">Successfully installed filprofiler-0.7.2</span><br></pre></td></tr></table></figure>

<p>在这里安装了<code>filprofiler 0.7.2</code>这是一个发布于2020年4月的比较老的<code>filprofiler</code>库的版本，目前（发表本文的时候）的最新版是2021年2月25日发布的0.16.0版。</p>
<p>这就是说，用老版本的<code>pip</code>安装老版本的模块或者库，是能够成功的。但是，在不指定版本的时候，模式是安装该模块或库的最新版，则会报错。</p>
<h2 id="解密"><a href="#解密" class="headerlink" title="解密"></a>解密</h2><p>安装Python的第三方库，往往需要编译由C/C++/Cython/Rust等开发的程序，为了免去从头开始编译的繁琐，开发者常常向PyPI（Python Package Index）上传已经编译好的代码，即“wheels”，俗称“轮子”，就是在上面的安装中所看到的扩展名是<code>whl</code>的文件。 如果<code>pip</code>找到了适用于你本地Python版本和操作系统的轮子，就会下载这个轮子，而不是下载源码。</p>
<p>以Linux为例，为了方便发布Python第三方包的编译结果程序（二进制文件），从而能让Python的“轮子”在Linux操作系统中工作，产生了一个名为<strong>manylinux</strong>的项目（<a href="https://github.com/pypa/manylinux），目前已有三个不同的版本：manylinux1、manylinux2010、manylinux2014，你可以在下载的“轮子”的文件名中看到正在使用哪个变体。例如上面安装`filprofiler" target="_blank" rel="noopener">https://github.com/pypa/manylinux），目前已有三个不同的版本：manylinux1、manylinux2010、manylinux2014，你可以在下载的“轮子”的文件名中看到正在使用哪个变体。例如上面安装`filprofiler</a> 0.7.2<code>时，所下载的“轮子”文件名是</code>filprofiler-0.7.2-cp36-cp36m-manylinux1_x86_64.whl<code>，这里所使用的就是</code>manylinux1`。</p>
<p>对于<code>pip</code>来说，老版本的<code>pip</code>不支持<code>manylinux2010</code>，当然也不支持<code>manylinux2014</code>。上面演示中， Ubuntu 18.04默认的<code>pip</code>太古老了，因此它只支持<code>manylinux1</code>。 这就把前面安装失败的内部原因揭示出来了。</p>
<ul>
<li>如果您查看PyPI上<a href="https://pypi.org/project/pyarrow/3.0.0/#files" target="_blank" rel="noopener">PyArrow 3.0.0</a>的文件下载列表，对于适用于Linux系统的文件而言，会发现只有<code>manylinux2010</code>和<code>manlinux2014</code>的<code>.whl</code>文件。那么，如果要用老版本的<code>pip</code>安装它，就不支持，于是乎转而寻找源代码——安装失败的演示中都显示下载<code>.gz</code>文件，即为源代码。在这个列表中，你会发现一个名为<code>pyarrow-3.0.0.tar.gz</code>的文件。</li>
<li>如果检查<code>filprofiler</code>PyPI文件<a href="https://pypi.org/project/filprofiler/0.14.1/#files" target="_blank" rel="noopener">下载列表</a>，会看到有<code>manylinux2010</code>的<code>.whl</code>文件，但是没有源程序包，这是因为此第三方包的开发没有上传源代码。如果用老版本的<code>pip</code>安装，就会从可下载的文件列表中从高版本向低版本注意查找，直到发现有<code>manylinux1</code>的<code>.whl</code>安装包为止。</li>
</ul>
<p>所以，同样是用老版本的<code>pip</code>，有的第三方库安装失败，有的成功了。事实上，多数情况下会失败的。</p>
<h2 id="所以要升级"><a href="#所以要升级" class="headerlink" title="所以要升级"></a>所以要升级</h2><p>为了能够用最新版本的第三方包，并且还不需要下载源码自己编译，最好的方法是及时升级<code>pip</code>。</p>
<p>常规的操作：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install --upgrade pip</span><br></pre></td></tr></table></figure>

<p>就这么简单。一般情况下，都能搞定。</p>
<p>如果上面的方法无能为力了，还可以这样做：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl https:&#x2F;&#x2F;bootstrap.pypa.io&#x2F;get-pip.py -o get-pip.py</span><br><span class="line">$ python3 get-pip.py</span><br></pre></td></tr></table></figure>

<p>如果你不打算修改当前环境中的<code>pip</code>版本，还想用最新的，就只能创建虚拟环境了，在虚拟环境中用最新版本，不会影响其他环境中的<code>pip</code>版本。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">root@1a43d55f0524:&#x2F;# python3 -m venv myvenv</span><br><span class="line">root@1a43d55f0524:&#x2F;# . myvenv&#x2F;bin&#x2F;activate</span><br><span class="line">(myvenv) root@1a43d55f0524:&#x2F;# pip --version</span><br><span class="line">pip 9.0.1 from &#x2F;myvenv&#x2F;lib&#x2F;python3.6&#x2F;site-packages (python 3.6)</span><br><span class="line">(myvenv) root@1a43d55f0524:&#x2F;# pip install --upgrade pip</span><br><span class="line">Collecting pip</span><br><span class="line">  Using cached https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;fe&#x2F;ef&#x2F;60d7ba03b5c442309ef42e7d69959f73aacccd0d86008362a681c4698e83&#x2F;pip-21.0.1-py3-none-any.whl</span><br><span class="line">Installing collected packages: pip</span><br><span class="line">  Found existing installation: pip 9.0.1</span><br><span class="line">    Uninstalling pip-9.0.1:</span><br><span class="line">      Successfully uninstalled pip-9.0.1</span><br><span class="line">Successfully installed pip-21.0.1</span><br></pre></td></tr></table></figure>

<p>这样，在虚拟环境中，就有了最新版本的<code>pip</code>，再装前面那两个没有成功的库：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(myvenv) root@<span class="number">1</span>a43d55f0524:/<span class="comment"># pip install cryptography filprofiler</span></span><br><span class="line">Collecting cryptography</span><br><span class="line">  Downloading cryptography<span class="number">-3.4</span><span class="number">.6</span>-cp36-abi3-manylinux2014_x86_64.whl (<span class="number">3.2</span> MB)</span><br><span class="line">     |<span class="comment">################################| 3.2 MB 4.5 MB/s </span></span><br><span class="line">...</span><br><span class="line">Installing collected packages: pycparser, threadpoolctl, cffi, filprofiler, cryptography</span><br><span class="line">Successfully installed cffi<span class="number">-1.14</span><span class="number">.5</span> cryptography<span class="number">-3.4</span><span class="number">.6</span> filprofiler<span class="number">-0.14</span><span class="number">.1</span> pycparser<span class="number">-2.20</span> threadpoolctl<span class="number">-2.1</span><span class="number">.0</span></span><br></pre></td></tr></table></figure>

<p>顺利完成。</p>
<h2 id="释疑"><a href="#释疑" class="headerlink" title="释疑"></a>释疑</h2><p>看了前面的解释，虽然明白升级<code>pip</code>的必要了——其实这也足够应付一般操作了，但可能还有一点点疑惑，为什么Linux系统搞出好几个<code>manylinux</code>的版本？一个不更好吗？为了满足好奇心，我们要从Python的扩展库编译说起，当然是以Linux系统为例。</p>
<p>在Linux系统中，编译好的Python的库必须基于标准C语言库，特别是GNU Libc（又名：glibc），可以用<code>ldd</code>指令查看：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">root@1a43d55f0524:&#x2F;# cd myenv&#x2F;lib&#x2F;python3.6&#x2F;site-packages</span><br><span class="line">root@1a43d55f0524:&#x2F;# ldd cryptography&#x2F;hazmat&#x2F;bindings&#x2F;_openssl.abi3.so </span><br><span class="line">        linux-vdso.so.1 (0x00007ffdbea7b000)</span><br><span class="line">        libpthread.so.0 &#x3D;&gt; &#x2F;lib&#x2F;x86_64-linux-gnu&#x2F;libpthread.so.0 (0x00007fba7b1bf000)</span><br><span class="line">        libc.so.6 &#x3D;&gt; &#x2F;lib&#x2F;x86_64-linux-gnu&#x2F;libc.so.6 (0x00007fba7adce000)</span><br><span class="line">        &#x2F;lib64&#x2F;ld-linux-x86-64.so.2 (0x00007fba7b7b0000)</span><br></pre></td></tr></table></figure>

<p>上面列出的编译好的Python第三方库的依赖中，<code>/lib/x86_64-linux-gnu/libc.so.6</code>就是前面说的<code>glibc</code>。</p>
<p>如果基于新版的glibc编译代码，就会用到新版的接口，老版本就不能用了，这就意味着你的代码将无法在较早版本的glibc上运行，即无法在较早的Linux发行版上运行。</p>
<p>这就出现了版本兼容性问题，为此不同的工具提供了不同的解决方案。比如：Conda在编译的时候将所有旧版本的glibc头文件都包含进去，用这种方式就能兼容各种Linux版本。</p>
<p>PyPI中的二进制“轮子”则是以在老版本的Linux上进行编译来解决此问题，这就是<code>manylinux</code>项目的起源。比如：</p>
<ul>
<li>manylinux1对应CentOS 5</li>
<li>manylinux2010 对应于 CentOS 6</li>
<li>manylinux2014 对应于 CentOS 7</li>
</ul>
<p>这样，在相应版本的<code>glibc</code>进行编译，就能与对应版本的Linux匹配了。</p>
<p>以上面列出的 CentOS 为例，每个版本都有各自的声明周期，对应于相应版本的操作系统，所以，就需要发布新的<code>pip</code>。</p>
<h2 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h2><p>勿需多言了，结论就是：必须升级<code>pip</code>。</p>
<p>否则，安装第三方库就得自己编译，那将浪费很多时间。</p>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p>[1]. Python大学实用教程. 齐伟. 北京：电子工业出版社</p>
<p>[2]. 跟老齐学Python：轻松入门. 齐伟. 北京：电子工业出版社</p>
<p>[3]. <a href="https://pythonspeed.com/articles/upgrade-pip/" target="_blank" rel="noopener">https://pythonspeed.com/articles/upgrade-pip/</a></p>
<p>[4]. <a href="https://www.itdiffer.com" target="_blank" rel="noopener">https://www.itdiffer.com</a>，此网站上有关于[1]、[2]的完整资料，包括但不限于勘误、说明、购买和部分视频等。</p>
</section>
    <!-- Tags START -->
    
    <!-- Tags END -->
    <!-- NAV START -->
    
  <div class="nav-container">
    <!-- reverse left and right to put prev and next in a more logic postition -->
    
      <a class="nav-left" href="/2021/02/23/golden-age/">
        <span class="nav-arrow">← </span>
        
          编程的黄金时代结束了吗？
        
      </a>
    
    
      <a class="nav-right" href="/2021/03/02/merge-dataframes/">
        
          合并Pandas的DataFrame方法汇总
        
        <span class="nav-arrow"> →</span>
      </a>
    
  </div>

    <!-- NAV END -->
    <!-- 打赏 START -->
    
      <div class="money-like">
        <div class="reward-btn">
          赏
          <span class="money-code">
            <span class="alipay-code">
              <div class="code-image"></div>
              <b>使用支付宝打赏</b>
            </span>
            <span class="wechat-code">
              <div class="code-image"></div>
              <b>使用微信打赏</b>
            </span>
          </span>
        </div>
        <p class="notice">若你觉得我的文章对你有帮助，欢迎点击上方按钮对我打赏</p>
      </div>
    
    <!-- 打赏 END -->
    <!-- 二维码 START -->
    <!--% if (theme.qrcode) { %-->
      <div class="qrcode">
        <!--canvas id="share-qrcode"></!--canvas-->
        <img src="https://public-tuchuang.oss-cn-hangzhou.aliyuncs.com/WechatIMG6_20200109154827.jpeg" width=400>
        <p class="notice">关注微信公众号，读文章、听课程，提升技能</p>
      </div>
    <!--% } %-->
    <!-- 二维码 END -->
    
      <!-- No Comment -->
    
  </article>
  <!-- Article END -->
  <!-- Catalog START -->
  
    <aside class="catalog-container">
  <div class="toc-main">
    <strong class="toc-title">Catalog</strong>
    
      <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#老版本的问题"><span class="toc-nav-text">老版本的问题</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#解密"><span class="toc-nav-text">解密</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#所以要升级"><span class="toc-nav-text">所以要升级</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#释疑"><span class="toc-nav-text">释疑</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#结论"><span class="toc-nav-text">结论</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#参考文献"><span class="toc-nav-text">参考文献</span></a></li></ol>
    
  </div>
</aside>
  
  <!-- Catalog END -->
</main>

<script>
  (function () {
    var url = 'https://qiwsir.github.io/2021/02/27/upgrade-pip/';
    var banner = ''
    /*if (banner !== '' && banner !== 'undefined' && banner !== 'null') {
      $('#article-banner').css({
        'background-image': 'url(' + banner + ')'
      })
    } else {
      $('#article-banner').geopattern(url)
    }*/
    //$('.header').removeClass('fixed-header')

    // error image
    $(".markdown-content img").on('error', function() {
      $(this).attr('src', 'http://file.muyutech.com/error-img.png')
      $(this).css({
        'cursor': 'default'
      })
    })

    // zoom image
    $(".markdown-content img").on('click', function() {
      var src = $(this).attr('src')
      if (src !== 'http://file.muyutech.com/error-img.png') {
        var imageW = $(this).width()
        var imageH = $(this).height()

        var zoom = ($(window).width() * 0.95 / imageW).toFixed(2)
        zoom = zoom < 1 ? 1 : zoom
        zoom = zoom > 2 ? 2 : zoom
        var transY = (($(window).height() - imageH) / 2).toFixed(2)

        $('body').append('<div class="image-view-wrap"><div class="image-view-inner"><img src="'+ src +'" /></div></div>')
        $('.image-view-wrap').addClass('wrap-active')
        $('.image-view-wrap img').css({
          'width': `${imageW}`,
          'transform': `translate3d(0, ${transY}px, 0) scale3d(${zoom}, ${zoom}, 1)`
        })
        $('html').css('overflow', 'hidden')

        $('.image-view-wrap').on('click', function() {
          $(this).remove()
          $('html').attr('style', '')
        })
      }
    })
  })();
</script>







    <div class="scroll-top">
  <span class="arrow-icon"></span>
</div>
    <footer class="app-footer">
  <p class="copyright">
    &copy; 2022 | Proudly powered by 老齐教室 | <a href='http://www.beian.miit.gov.cn' target="_blank" rel="noopener">苏ICP备13034293号-2 </a>
  </p>
</footer>

<script>
  function async(u, c) {
    var d = document, t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
    s.parentNode.insertBefore(o, s);
  }
</script>
<script>
  async("//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js", function(){
    FastClick.attach(document.body);
  })
</script>

<script>
  var hasLine = 'true';
  async("//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js", function(){
    $('figure pre').each(function(i, block) {
      var figure = $(this).parents('figure');
      if (hasLine === 'false') {
        figure.find('.gutter').hide();
      }
      var lang = figure.attr('class').split(' ')[1] || 'code';
      var codeHtml = $(this).html();
      var codeTag = document.createElement('code');
      codeTag.className = lang;
      codeTag.innerHTML = codeHtml;
      $(this).attr('class', '').empty().html(codeTag);
      figure.attr('data-lang', lang.toUpperCase());
      hljs.highlightBlock(block);
    });
  })
</script>
<!-- Baidu Tongji -->


<script src="/js/script.js"></script>

  </body>
</html>